<link href="css/import-resource-tree.css?v=[AIV]{version}[/AIV]" rel="stylesheet">

<div class="import-resource-tree mt-2" ng-if="resources && !resources.isEmpty()">
    <div class="import-resource-tree-header">
        <div class="import-resources-actions">
Imports will be here
        </div>
        <div class="import-resource-tree-filter btn-group">
            <button class="btn btn-secondary"
                    ng-click="changeTypeFilter(TYPE_FILTER_OPTIONS.FILE)"
                    ng-class="{'active': TYPE_FILTER_OPTIONS.FILE === filterByType}">
                <em class="icon-file"></em>
            </button>
            <button class="btn btn-secondary"
                    ng-click="changeTypeFilter(TYPE_FILTER_OPTIONS.ALL)"
                    ng-class="{'active': TYPE_FILTER_OPTIONS.ALL === filterByType}">
                <em class="icon-file"></em>
                <em class="icon-folder"></em>
            </button>
            <button class="btn btn-secondary"
                    ng-click="changeTypeFilter(TYPE_FILTER_OPTIONS.DIRECTORY)"
                    ng-class="{'active': TYPE_FILTER_OPTIONS.DIRECTORY === filterByType}">
                <em class="icon-folder"></em>
            </button>
            <div class="input-group ml-1">
                <label class="input-group-addon" for="fileQuery">
                    <span class="icon-search icon-lg text-muted"></span>
                </label>
                <input id="fileQuery" class="form-control" type="text" ng-model="filterByFileName"  ng-change="handleInputChange(filterByFileName)"
                       placeholder="{{'import.type.to.filter' | translate}}">
            </div>
        </div>
    </div>
    <table class="import-resource-table">
        <thead>
        <tr class="import-resource-row">
            <th class="import-resource-header-cell import-resource-cell-select"></th>
            <th class="import-resource-header-cell import-resource-name">{{'import.import_resource_tree.header.name' | translate}}</th>
            <th class="import-resource-header-cell import-resource-size">{{'import.import_resource_tree.header.size' | translate}}</th>
            <th class="import-resource-header-cell import-resource-modified">{{'import.import_resource_tree.header.modified' | translate}}</th>
            <th class="import-resource-header-cell import-resource-imported">{{'import.import_resource_tree.header.imported' | translate}}</th>
            <th class="import-resource-header-cell import-resource-context">{{'import.import_resource_tree.header.context' | translate}}</th>
            <th class="import-resource-header-cell import-resource-action"></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat-start="resource in displayResources track by resource.importResource.name"
            class="import-resource-row"
            ng-class="{ 'even-row-start': $even, 'odd-row-start': $odd}">
            <td class="import-resource-cell import-resource-cell-select">
                <input type="checkbox" ng-model="resource.selected" ng-click="selectionChanged($event, resource)">
            </td>
            <td colspan="5"
                ng-style="{'padding-left': (filterByType !== TYPE_FILTER_OPTIONS.FILE ? resource.indent : '8px')}"
                class="import-resource-cell">
                <span class="import-resource-title">
                    <em ng-class="{'icon-folder': resource.isDirectory(), 'icon-file': resource.isFile()}"></em>
                    <span>{{resource.name}}</span>
                </span>
            </td>
            <td class="import-resource-cell">
                <div class="import-resource-actions">
                    <div class="icon-info text-tertiary import-resource-action-info"></div>
                    <button class="btn btn-link secondary import-resource-action-remove" ng-click="onDelete({resource: resource})">
                        <em class="icon-trash"></em>
                    </button>
                    <button class="btn btn-primary btn-sm import-resource-action-import" ng-click="onImport({resource: resource})">
                        <span class="icon-import"></span>
                    </button>
                </div>
            </td>
        </tr>
        <tr ng-repeat-end class="import-resource-row" ng-class="{ 'even-row-end': $even, 'odd-row-end': $odd}">
            <td class="import-resource-cell import-resource-cell-select"></td>
            <td ng-style="{'padding-left': (filterByType !== TYPE_FILTER_OPTIONS.FILE ? resource.indent : '8px')}"
                class="import-resource-cell import-resource-message">
                {{ resource.importResource.message || ''}}
            </td>
            <td class="import-resource-cell import-resource-size">
                {{ resource.importResource.size || ''}}
            </td>
            <td class="import-resource-cell import-resource-modified">
                {{ resource.importResource.timestamp | date:'yyyy-MM-dd, HH:mm' }}
            </td>
            <td class="import-resource-cell import-resource-imported">
                {{ resource.importResource.timestamp | date:'yyyy-MM-dd, HH:mm' }}
            </td>
            <td class="import-resource-cell">
                {{ resource.importResource.context || ''}}
            </td>
            <td class="import-resource-cell import-resource-cell-action"></td>
        </tr>
        </tbody>
    </table>
</div>
